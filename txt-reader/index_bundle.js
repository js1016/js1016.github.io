!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";t.__esModule=!0;var i=n(2),r=n(4),o=n(1),s=document.getElementById("status"),a=document.getElementById("file-info"),u=document.getElementById("try-other"),l=document.getElementById("idle"),c=document.getElementById("loading"),f=document.getElementById("progress-bar"),d=document.getElementById("loading-message");function h(){s.classList.add("visible")}function p(){s.classList.remove("visible")}t.init=function(){i.stopDefault(u,"click"),u.addEventListener("click",function(){p(),o.hide(),r.resetFile(),r.show()})},t.setFileInfo=function(e,t){a.innerText=e+" ("+t+" lines)"},t.showIdle=function(){h(),c.classList.add("hide"),l.classList.remove("hide")},t.hideStatusBar=p,t.showLoading=function(){h(),l.classList.add("hide"),c.classList.remove("hide")},t.setLoadingPercentage=function(e){f.style.width=e+"%"},t.setLoadingMessage=function(e){d.innerText=e}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(3),r=n(2),o=n(0),s=document.getElementById("main"),a=document.getElementById("view-first"),u=document.getElementById("view-next"),l=document.getElementById("view-last"),c=document.getElementById("run-button"),f=document.getElementById("console"),d=document.getElementById("clear-console"),h=document.getElementById("results"),p=document.getElementById("start-row"),g=document.getElementById("row-size"),y=1;function m(e){w(e,!1)}function v(e){w(e,!0)}function w(e,t){var n=document.createElement("div");n.innerText=e,n.className=t?"err":"log",f.appendChild(n),f.scrollTop=f.scrollHeight}function b(e,t){m("Call method: reader.getLine("+e+", "+t+")"),i.reader.getLines(e,t).progress(function(e){r.displayLoading("Getting lines...",e)}).then(function(n){(y=e+t)>i.reader.lineCount&&(y=1),o.showIdle(),m("getLine completed. Time taken: "+n.timeTaken+"ms. Returned "+n.result.length+" lines."),function(e,t){for(var n="",i=0;i<e.length;i++)n+='<div class="line"><div class="line-indicator">'+(t+i)+'</div><div class="content">'+r.encodeHTML(e[i])+"</div></div>";h.innerHTML=n}(n.result,e)}).catch(function(e){v("getLine failed with error: "+e)})}t.init=function(){a.addEventListener("click",function(){b(1,50)}),l.addEventListener("click",function(){b(i.reader.lineCount>50?i.reader.lineCount-49:1,50)}),u.addEventListener("click",function(){b(y,50)}),c.addEventListener("click",function(){var e=Number(p.value);e<=0?v("Start line number is invalid."):b(e,Number(g.value))}),d.addEventListener("click",function(){f.innerHTML=""}),r.stopDefault(d,"click")},t.show=function(){s.classList.remove("hide")},t.hide=function(){s.classList.add("hide")},t.log=m,t.error=v,t.clearResults=function(){h.innerHTML=""}},function(e,t,n){"use strict";t.__esModule=!0,n(6);var i=n(0);t.stopDefault=function(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)e.addEventListener(n[i],function(e){e.preventDefault(),e.stopPropagation()})},t.displayLoading=function(e,t){i.showLoading(),i.setLoadingMessage(e+" "+t+"%"),i.setLoadingPercentage(t)},t.encodeHTML=function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(5);t.reader=new i.TxtReader},function(e,t,n){"use strict";t.__esModule=!0;var i=n(2),r=n(0),o=n(1),s=n(3),a=document.getElementById("box"),u=document.getElementById("file-input");function l(){a.style.marginTop="-"+(a.offsetHeight+a.offsetTop)+"px"}function c(){a.classList.remove("hide"),setTimeout(function(){a.style.marginTop="100px"},0)}function f(e){var t;l(),t=e[0],i.displayLoading("Loading file: "+t.name+"...",0),o.log("Call method: reader.loadFile(file)"),s.reader.loadFile(t).progress(function(e){i.displayLoading("Loading file: "+t.name+"...",e)}).then(function(e){o.clearResults(),r.setFileInfo(t.name,e.result.lineCount),o.log("loadFile completed. Time taken: "+e.timeTaken+"ms. Line count: "+e.result.lineCount+"."),r.showIdle(),o.show()}).catch(function(e){r.hideStatusBar(),alert("wrong"),c()})}t.init=function(){i.stopDefault(a,"drag dragstart dragend dragover dragenter dragleave drop"),a.addEventListener("drop",function(e){e.dataTransfer.files.length>0&&f(e.dataTransfer.files)}),u.addEventListener("change",function(e){this.files.length>0&&f(this.files)}),a.addEventListener("transitionend",function(){this.style.marginTop.startsWith("-")&&this.classList.add("hide")})},t.resetFile=function(){u.value=""},t.hide=l,t.show=c},function(e,t){!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){void 0===Uint8Array.prototype.indexOf&&(Uint8Array.prototype.indexOf=function(e){return Array.prototype.indexOf.call(this,e)}),void 0===Uint8Array.prototype.slice&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(Array.prototype.slice.call(this,e,t))}),Uint8Array.prototype.forEach||(Uint8Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var o;n in i&&(o=i[n],e.call(t,o,n,i)),n++}})},function(e,t,n){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";var e="undefined"!=typeof GLOBAL?GLOBAL:window;if(void 0!==e.TextEncoder&&void 0!==e.TextDecoder)return{TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder};var t=["utf8","utf-8","unicode-1-1-utf-8"];return{TextEncoder:function(e){if(t.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(e){if("string"!=typeof e)throw new TypeError("passed argument must be of tye string");var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);return t.split("").forEach(function(e,t){n[t]=e.charCodeAt(0)}),n}},TextDecoder:function(e,n){if(t.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal=void 0!==n&&fatal in n&&n.fatal,"boolean"!=typeof this.fatal)throw new TypeError("fatal flag must be boolean");this.decode=function(e,t){if(void 0===e)return"";var n=void 0!==t&&n in t&&t.stream;if("boolean"!=typeof n)throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){var i=new Uint8Array(e.buffer),r=new Array(i.length);return i.forEach(function(e,t){r[t]=String.fromCharCode(e)}),decodeURIComponent(escape(r.join("")))}throw new TypeError("passed argument must be an array buffer view")}}}})?i.apply(t,[]):i)||(e.exports=r)},function(e,t,n){"use strict";t.__esModule=!0,"undefined"==typeof window&&"undefined"!=typeof self&&(self.window=self);var i=n(3);t.TextDecoder=i.TextDecoder},function(e,t,n){"use strict";(function(e){var i=n(0),r=setTimeout;function o(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}u(t.promise,i)}else(1===e._state?u:l)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}var i,r}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},s.prototype.finally=i.a,s.all=function(e){return new s(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function o(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){o(e,t)},n)}i[e]=s,0==--r&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)o(s,i[s])})},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=s}).call(this,n(9).setImmediate)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);n(10),n(2);var r,o=function(e,t){this.action=e,this.data=void 0!==t?t:null};!function(e){e[e.Initialized=0]="Initialized",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Completed=3]="Completed"}(r||(r={}));var s=function(){function e(e,t,n){var i=this;this.id=e,this.requestMessage=t,this.parser=n,this.requestMessage.taskId=e,this.state=r.Initialized,this.onProgress=null,this.startTime=0,this.promise=new Promise(function(e,t){i.resolve=e,i.reject=t})}return e.prototype.dispose=function(){this.resolve=null,this.reject=null,this.promise=null},e.prototype.run=function(){this.state=r.Running,this.startTime=(new Date).getTime()},e.prototype.complete=function(e){this.state=r.Completed;var t=(new Date).getTime()-this.startTime;if(e.success){var n={timeTaken:t,message:e.message,result:e.result};this.resolve(n)}else this.reject(e.message);this.dispose()},e.prototype.updateProgress=function(e){null!==this.onProgress&&this.onProgress.call(this.parser,e)},e.prototype.then=function(e){var t=this;return this.promise.then(function(n){e.call(t.parser,n)}).catch(function(e){}),this},e.prototype.catch=function(e){var t=this;return this.promise.catch(function(n){e.call(t.parser,n)}),this},e.prototype.progress=function(e){return this.onProgress=e,this},e}(),a=function(){function e(){var e=this;this.taskList=[],this.runningTask=null,this.queuedTaskList=[],this.verboseLogging=!1,this.utf8decoder=new i.TextDecoder("utf-8"),this.lineCount=0,Object.defineProperty(this,"lineCount",{value:0,writable:!1}),this.file=null,this.worker=new Worker(window.URL.createObjectURL(new Blob(['!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}({12:function(e,t,i){"use strict";t.__esModule=!0;var n=i(4);i(2);var r=new n.TextDecoder("utf-8"),s=52428800,o=null,a=null,l=!1,h=navigator.userAgent.indexOf("Firefox")>-1,u=function(e){e.done&&(o=null),postMessage.apply(null,[e])},f=function(e){var t=new p(e);return t.done=!1,t},c=function(){return null!==a||(u(new p(!1,"File has not been loaded into the worker, need to loadFile first.")),!1)},d=function(e,t){if(0===e.byteLength)return t;if(0===t.byteLength)return e;var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(e,0),i.set(t,e.byteLength),i};self.addEventListener("message",function(e){var t=e.data;if(l&&console.log("Worker thread received a message from main thread: \\r\\n",e.data),null!==o)throw"The worker thread is busy.";switch(o=t.taskId,t.action){case"loadFile":a=new w(t.data.file,t.data.config);break;case"enableVerbose":l=!0,u(new p(!0));break;case"setChunkSize":if("number"!=typeof t.data||t.data<1)return void u(new p(!1,"Invalid CHUNK_SIZE, must be greater than 1."));a&&(a.CHUNK_SIZE=t.data),s=t.data,u(new p(s));break;case"getLines":c()&&a.getLines(t.data.start,t.data.count);break;case"iterateLines":c()&&a.iterateLines(t.data)}});var p=function(){return function(e,t,i){if(this.taskId=o,1===arguments.length)this.success=!0,this.message="",this.result=e;else if(2===arguments.length)switch(typeof e){case"boolean":this.success=e,this.message=t,this.result=null;break;default:this.success=!0,this.message=e,this.result=t}else this.success=e,this.message=t,this.result=i;this.done=!0}}(),y=function(){function e(){this.lineView=new Uint8Array(0),this.lastViewEndsWithCR=!1,this.onEachLineInternal=null,this.onEachLine=null,this.eachLineScope=null,this.onSeekComplete=null,this.offset=0,this.createMap=!1,this.endOffset=null,this.linesToIterate=0,this.linesProcessed=0,this.currentLineNumber=1,this.startLineNumber=0,this.lastProgress=null,this.processedViewLength=0,this.lineBreakLength=0,this.map=[],this.lastMappedProgress=null}return e.prototype.shouldBreak=function(){return!(!this.isPartialIterate()||this.linesProcessed!==this.linesToIterate)},e.prototype.isPartialIterate=function(){return this.linesToIterate>0},e.prototype.hitLine=function(e){var t=this.isPartialIterate(),i=0;if(!t||t&&this.currentLineNumber>=this.startLineNumber){if(this.linesProcessed++,i=t?Math.round(this.linesProcessed/this.linesToIterate*1e4)/100:Math.round(this.processedViewLength/this.endOffset*1e4)/100,this.createMap){var n=Math.round(i);(null===this.lastMappedProgress||this.lastMappedProgress<n)&&(this.lastMappedProgress=n,this.map.push({line:this.currentLineNumber,offset:this.processedViewLength}))}null!==this.onEachLineInternal&&(e.buffer.byteLength!=e.byteLength&&(e=new Uint8Array(e)),this.onEachLineInternal.call(self,e,i)),null!==this.onEachLine&&(e.buffer.byteLength!=e.byteLength&&(e=new Uint8Array(e)),this.onEachLine.call(this.eachLineScope,e,i,this.currentLineNumber))}t&&this.shouldReportProgress(i)&&(this.lastProgress=i,u(f(i<100?i:100))),this.processedViewLength+=e.length+this.lineBreakLength,this.currentLineNumber++},e.prototype.shouldReportProgress=function(e){return null===this.lastProgress||e-this.lastProgress>5},e.prototype.bindEachLineFromConfig=function(e){this.onEachLine=new Function("return "+e.eachLine)(),this.eachLineScope=e.scope,this.eachLineScope.decode=function(e){return r.decode(e)}},e}(),w=function(){function e(e,t){var i=this;"[object file]"===Object.prototype.toString.call(e).toLowerCase()?(this.CHUNK_SIZE=s,this.file=e,this.lineCount=0,this.quickSearchMap=[],this.fr=new FileReader,this.fr.onload=function(){for(var e=new Uint8Array(i.fr.result),t=(i.fr.result.byteLength,i.iterator);e.length>0;){var n=e.indexOf(13),r=e.indexOf(10),s=void 0,o=!1,a=!1;if(n>0&&(-1===r||n<r))n<e.length-1?10===e[n+1]?(s=n,t.lineBreakLength=2):(s=n,t.lineBreakLength=1):(a=!0,o=!0);else if(0===n)e.length>1?10===e[1]?(s=n,t.lineBreakLength=2):(s=n,t.lineBreakLength=1):(a=!0,o=!0);else if(r>0)s=r,t.lineBreakLength=1;else{if(0===r){if(t.lineBreakLength=t.lastViewEndsWithCR?2:1,t.hitLine(t.lastViewEndsWithCR?t.lineView.slice(0,t.lineView.length-1):t.lineView),t.shouldBreak())break;t.lineView=new Uint8Array(0),e=new Uint8Array(i.fr.result,1+e.byteOffset),t.lastViewEndsWithCR=!1;continue}o=!0}if(o){if(t.lastViewEndsWithCR){if(t.lineBreakLength=1,t.hitLine(t.lineView.slice(0,t.lineView.length-1)),t.shouldBreak())break;t.lineView=new Uint8Array(0)}t.lineView=d(t.lineView,e),t.lastViewEndsWithCR=a;break}if(t.lastViewEndsWithCR){if(t.hitLine(t.lineView.slice(0,t.lineView.length-1)),t.shouldBreak())break;if(t.hitLine(e.slice(0,s)),t.shouldBreak())break;t.lastViewEndsWithCR=!1}else if(t.lineView=d(t.lineView,e.slice(0,s)),t.hitLine(t.lineView),t.shouldBreak())break;t.lineView=new Uint8Array(0),e=new Uint8Array(i.fr.result,e.byteOffset+s+t.lineBreakLength)}if(!t.isPartialIterate()){var l=Math.round(t.offset/i.file.size*1e4)/100;u(f(l<100?l:100))}t.offset+=i.CHUNK_SIZE,t.lineBreakLength=0,i.seek()},this.iterator=new y,this.iterator.createMap=!0,this.iterator.endOffset=this.file.size,t&&this.iterator.bindEachLineFromConfig(t),this.iterateLinesInternal(function(e,t){i.lineCount++},function(){i.quickSearchMap=i.iterator.map;var e={lineCount:i.lineCount};t&&(delete i.iterator.eachLineScope.decode,e.scope=i.iterator.eachLineScope),u(new p(e))})):u(new p(!1,"Invalid file object"))}return e.prototype.setPartialIterator=function(e,t){if(e<1||e>this.lineCount)return u(new p(!1,"Start line number is invalid")),!1;var i=e+t-1;i=i>this.lineCount?this.lineCount:i;for(var n=0;n<this.quickSearchMap.length;n++)e>=this.quickSearchMap[n].line&&(n===this.quickSearchMap.length-1||e<this.quickSearchMap[n+1].line)&&(this.iterator.offset=this.quickSearchMap[n].offset,this.iterator.currentLineNumber=this.quickSearchMap[n].line),i<this.quickSearchMap[n].line&&(0===n||i>=this.quickSearchMap[n-1].line)?this.iterator.endOffset=this.quickSearchMap[n].offset:this.iterator.endOffset=this.file.size;return this.iterator.linesToIterate=t,this.iterator.startLineNumber=e,!0},e.prototype.iterateLinesInternal=function(e,t){this.iterator.onEachLineInternal=e,this.iterator.onSeekComplete=t||null,this.seek()},e.prototype.iterateLines=function(e){var t=this,i=e.config;if((this.iterator.offset=0,this.iterator.endOffset=this.file.size,this.iterator.bindEachLineFromConfig(i),this.iterator.onSeekComplete=function(){delete t.iterator.eachLineScope.decode,u(new p(t.iterator.eachLineScope))},null!==e.start&&null!==e.count)&&!this.setPartialIterator(e.start,e.count))return;this.seek()},e.prototype.seek=function(){var e=this.iterator.linesToIterate>0&&this.iterator.linesProcessed===this.iterator.linesToIterate;if(this.iterator.offset>=this.iterator.endOffset||e)u(f(100)),this.iterator.lineView.byteLength&&!e&&(this.iterator.hitLine(this.iterator.lineView),this.iterator.lineView=new Uint8Array(0)),null!==this.iterator.onSeekComplete&&this.iterator.onSeekComplete.call(self),this.iterator=new y;else{var t=this.file.slice(this.iterator.offset,this.iterator.offset+this.CHUNK_SIZE);this.fr.readAsArrayBuffer(t)}},e.prototype.getLines=function(e,t){if(this.setPartialIterator(e,t)){var i=[],n=[];this.iterateLinesInternal(function(e){i.push(e),h&&n.push(e.buffer)},function(){var e,t;h?(e=new p(i),t=n,e.done&&(o=null),postMessage.apply(null,[e,t])):u(new p(i))})}},e}()},2:function(e,t){void 0===Uint8Array.prototype.indexOf&&(Uint8Array.prototype.indexOf=function(e){return Array.prototype.indexOf.call(this,e)}),void 0===Uint8Array.prototype.slice&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(Array.prototype.slice.call(this,e,t))}),Uint8Array.prototype.forEach||(Uint8Array.prototype.forEach=function(e){var t,i;if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),r=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),i=0;i<r;){var s;i in n&&(s=n[i],e.call(t,s,i,n)),i++}})},3:function(e,t,i){var n,r,s;r=[],void 0===(s="function"==typeof(n=function(){"use strict";var e="undefined"!=typeof GLOBAL?GLOBAL:window;if(void 0!==e.TextEncoder&&void 0!==e.TextDecoder)return{TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder};var t=["utf8","utf-8","unicode-1-1-utf-8"];return{TextEncoder:function(e){if(t.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(e){if("string"!=typeof e)throw new TypeError("passed argument must be of tye string");var t=unescape(encodeURIComponent(e)),i=new Uint8Array(t.length);return t.split("").forEach(function(e,t){i[t]=e.charCodeAt(0)}),i}},TextDecoder:function(e,i){if(t.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal=void 0!==i&&fatal in i&&i.fatal,"boolean"!=typeof this.fatal)throw new TypeError("fatal flag must be boolean");this.decode=function(e,t){if(void 0===e)return"";var i=void 0!==t&&i in t&&t.stream;if("boolean"!=typeof i)throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){var n=new Uint8Array(e.buffer),r=new Array(n.length);return n.forEach(function(e,t){r[t]=String.fromCharCode(e)}),decodeURIComponent(escape(r.join("")))}throw new TypeError("passed argument must be an array buffer view")}}}})?n.apply(t,r):n)||(e.exports=s)},4:function(e,t,i){"use strict";t.__esModule=!0,"undefined"==typeof window&&"undefined"!=typeof self&&(self.window=self);var n=i(3);t.TextDecoder=n.TextDecoder}});']))),this.worker.addEventListener("message",function(t){e.verboseLogging&&console.log("Main thread received a message from worker thread: \r\n",t.data);var n=t.data;if(n.taskId!==e.runningTask.id)throw"Received task ID ("+n.taskId+") does not match the running task ID ("+e.runningTask.id+").";if(n.done)e.completeTask(n);else{if(!("[object number]"===Object.prototype.toString.call(n.result).toLowerCase()&&n.result>=0&&n.result<=100))throw"Unkown message type";e.runningTask.updateProgress(n.result)}},!1)}return e.prototype.loadFile=function(e,t){var n=this;this.file=e,Object.defineProperty(this,"lineCount",{value:0,writable:!1});var i={file:e};return t&&(i.config=this.getItertorConfigMessage(t)),this.newTask("loadFile",i).then(function(e){Object.defineProperty(n,"lineCount",{value:e.result.lineCount,writable:!1})})},e.prototype.setChunkSize=function(e){return this.newTask("setChunkSize",e)},e.prototype.enableVerbose=function(){return this.verboseLogging=!0,this.newTask("enableVerbose")},e.prototype.getLines=function(e,t){var n=this;return this.newTask("getLines",{start:e,count:t}).then(function(e){for(var t=0;t<e.result.length;t++)e.result[t]=n.utf8decoder.decode(e.result[t])})},e.prototype.iterateLines=function(e,t,n){return this.newTask("iterateLines",{config:this.getItertorConfigMessage(e),start:t||null,count:n||null})},e.prototype.getItertorConfigMessage=function(e){return{eachLine:e.eachLine.toString(),scope:e.scope||{}}},e.prototype.newTask=function(e,t){var n=new o(e,t),i=new s(this.newTaskId(),n,this);return this.taskList.push(i),this.runningTask?(this.queuedTaskList.push(i),i.state=r.Queued):this.runTask(i),i},e.prototype.completeTask=function(e){this.runningTask.complete(e),this.runningTask=null,this.runNextTask()},e.prototype.runNextTask=function(){this.queuedTaskList.length&&this.runTask(this.queuedTaskList.shift())},e.prototype.runTask=function(e){this.runningTask=e,this.worker.postMessage(e.requestMessage),e.run()},e.prototype.newTaskId=function(){var e=this.taskList.length;return 0===e?1:this.taskList[e-1].id+1},e}();t.TxtReader=a},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,s,a,u=1,l={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,i=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(p,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[u]=r,i(u),u++},d.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(1),n(7))},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(8),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(5),i=n(0),r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();r.Promise?r.Promise.prototype.finally||(r.Promise.prototype.finally=i.a):r.Promise=t.a}.call(this,n(1))},function(e,n,i){"use strict";i.r(n);var r=i(6);t.TxtReader=r.TxtReader}])},function(e,t){
/*! http://mths.be/startswith v0.2.0 by @mathias */
String.prototype.startsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=n.length,r=String(e),o=r.length,s=arguments.length>1?arguments[1]:void 0,a=s?Number(s):0;a!=a&&(a=0);var u=Math.min(Math.max(a,0),i);if(o+u>i)return!1;for(var l=-1;++l<o;)if(n.charCodeAt(u+l)!=r.charCodeAt(l))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,n(10),n(8);var i=n(0),r=n(4),o=n(1);r.init(),i.init(),o.init()}]);